
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>md-block Tests</title>
	<link rel="icon" href="logo.svg">
	<link rel="stylesheet" href="https://test.mavo.io/style.css" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/blissfuljs/1.0.4/bliss.min.js"></script>
	<style>
		script[type="text/html"] {
			display: block;
			white-space: pre-wrap;
		}
	</style>
</head>
<body>

<h1>md-block Tests</h1>

<section>
	<h1>Basic functionality</h1>

	<table class="reftest" data-test="innerHTML">
		<tr title="md-block">
			<td>
				<md-block>
					**foo**

					```html
					&lt;foo>
					```
				</md-block>
			</td>
			<td>
				<script type="text/html">
					<p><strong>foo</strong></p>
					<pre class="language-html"><code>&lt;foo&gt;</code></pre>
				</script>
			</td>
		</tr>
		<tr title="md-span">
			<td>
				<md-span>
					**foo**

					```html
					&lt;foo>
					```
				</md-span>
			</td>
			<td>
				<script type="text/html">
					<strong>foo</strong> <code>html &lt;foo&gt; </code>
				</script>
			</td>
		</tr>
		<tr title="Nested HTML elements should still process markdown">
			<td>
				<md-block>
					<div class="warning">

					**Warning:** This should still have [Markdown](https://md-block.verou.me)
					</div>
				</md-block>
			</td>
			<td>
				<script type="text/html">
					<div class="warning">
						<p><strong>Warning:</strong> This should still have <a href="https://md-block.verou.me">Markdown</a></p>
					</div>
				</script>
			</td>
		</tr>
	</table>
</section>

<section>
	<h1>hmin</h1>

	<table class="reftest" data-test="innerHTML">
		<tr title="md-block">
			<td>
				<md-block hmin="3">
					# 1
					## 2
					### 3
					#### 4
					##### 5
					###### 6
				</md-block>
			</td>
			<td>
				<script type="text/html">
					<h3 id="1">1</h3>
					<h4 id="2">2</h4>
					<h5 id="3">3</h5>
					<h6 id="4">4</h6>
					<h6 id="5">5</h6>
					<h6 id="6">6</h6>
				</script>
			</td>
		</tr>
	</table>
</section>

<section>
	<h1>blockquote</h1>

	<table class="reftest" data-test="innerHTML">
		<tr title="blockquotes render correctly">
			<td>
				<md-block>
					> One long 
					>markdown
					>       blockquote area
					> with quotes > in quotes > in quotes
					    > with spaces before
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<blockquote><p>One long markdown blockquote area with quotes &gt; in quotes &gt; in quotes with spaces before</p></blockquote>
				</script>
			</td>
		</tr>
		<tr title="Text above blockquotes isn't enclosed">
			<td>
				<md-block>
					Text above blockquote
					> Blockquote
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Text above blockquote</p>
					<blockquote><p>Blockquote</p></blockquote>
				</script>
			</td>
		</tr>
		<tr title="Text below blockquotes isn't enclosed">
			<td>
				<md-block>
					> Blockquote
					
					Text below blockquote
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<blockquote><p>Blockquote</p></blockquote>
					<p>Text below blockquote</p>
				</script>
			</td>
		</tr>
		<tr title="> does not turn into blockquotes mid-text">
			<td>
				<md-block>
					Non-quoted > symbol in text
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Non-quoted &gt; symbol in text</p>
				</script>
			</td>
		</tr>
		<tr title="&gt turns into blockquote">
			<td>
				<md-block>
					&gt Escaped blockquote
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<blockquote><p>Escaped blockquote</p></blockquote>
				</script>
			</td>
		</tr>
	</table>
</section>

<section>
	<h1>Footnotes</h1>

	<table class="reftest" data-test="innerHTML">
		<tr title="Footnotes render correctly">
			<td>
				<md-block>
					Here is some text with a footnote[^x]. With more text.

					[^x]: Here is the content of that footnote.
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text with a footnote<sup><a class="footnote-ref" href="#footnote-1" id="footnote-1-ref"></a></sup>. With more text.</p>
					<div class="footnotes">
						<hr class="footnote-div"/>
						<p>1. Here is the content of that footnote. <a class="footnote" href="#footnote-1-ref" id="footnote-1">↩</a></p>
					</div>
				</script>
			</td>
		</tr>
		<tr title="One footnote can be called from multiple sites">
			<td>
				<md-block>
					Here is some text with a footnote[^x]. More text with the same footnote[^x].

					[^x]: Here is the content of that footnote.
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text with a footnote<sup><a class="footnote-ref" href="#footnote-1" id="footnote-1-ref">1</a></sup>. More text with the same footnote<sup><a class="footnote-ref" href="#footnote-1-2" id="footnote-1-ref-2">1</a></sup>.</p>
					<div class="footnotes">
						<hr class="footnote-div"/>
						<p>1. Here is the content of that footnote. <a class="footnote" href="#footnote-1-ref" id="footnote-1">↩</a><a class="footnote" href="#footnote-1-ref-2" id="footnote-1-2">↩</a></p>
					</div>
				</script>
			</td>
		</tr>
		<tr title="If no description is present, reference is not treated as a footnote">
			<td>
				<md-block>
					Here is some text with a footnote[^x], but we forgot to define it!
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text with a footnote[^x], but we forgot to define it!</p>
				</script>
			</td>
		</tr>
		<tr title="A footnote description without a reference is ignored">
			<td>
				<md-block>
					Here is some text without footnotes.

					[^x]: And here is a footnote we've defined anyway.
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text without footnotes.</p>
				</script>
			</td>
		</tr>
		<tr title="Footnotes are sorted by first appearance">
			<td>
				<md-block>
					Here is some text with[^A] multiple[^B] footnotes[^C].

					[^C]: This should be the last footnote.
					[^A]: This should be the first footnote.
					[^B]: This should be the middle footnote.
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text with<sup><a class="footnote-ref" href="#footnote-1" id="footnote-1-ref">1</a></sup> multiple<sup><a class="footnote-ref" href="#footnote-2" id="footnote-2-ref">2</a></sup> footnotes<sup><a class="footnote-ref" href="#footnote-3" id="footnote-3-ref">3</a></sup>.</p>
					<div class="footnotes">
						<hr class="footnote-div"/>
						<p>1. This should be the first footnote. <a class="footnote" href="#footnote-1-ref" id="footnote-1">↩</a></p>
						<p>2. This should be the middle footnote. <a class="footnote" href="#footnote-2-ref" id="footnote-2">↩</a></p>
						<p>3. This should be the last footnote. <a class="footnote" href="#footnote-3-ref" id="footnote-3">↩</a></p>
					</div>
				</script>
			</td>
		</tr>
		<tr title="Multiply-defined footnotes show first definition only">
			<td>
				<md-block>
					Here is some text with a footnote[^C].

					[^C]: This is the first definition.

					[^C]: This definition should be excluded.
				</md-block>
				<testarea>
				</testarea>
			</td>
			<td>
				<script type="text/html">
					<p>Here is some text with a footnote<sup><a class="footnote-ref" href="#footnote-1" id="footnote-1-ref">1</a></sup>.</p>
					<div class="footnotes">
						<hr class="footnote-div"/>
						<p>1. This is the first definition. <a class="footnote" href="#footnote-1-ref" id="footnote-1">↩</a></p>
					</div>
				</script>
			</td>
		</tr>
	</table>
</section>

<script>
function innerHTML(test, ref) {
	// console.log( $("md-block", test).innerHTML)
	test = $("md-block, md-span", test)?.innerHTML;

	ref = $("script[type='text/html']", ref)?.textContent;
	[test, ref] = [test, ref].map(t => t.trim().replace(/\s+/g, " ").replace(/>\s+/g, ">").replace(/\s+<\//g, "</"));
	console.log(test, 1, ref)
	return test == ref;
}
</script>

<script src="https://test.mavo.io/test.js"></script>
<script src="md-block.js" type="module"></script>

</body>
</html>
